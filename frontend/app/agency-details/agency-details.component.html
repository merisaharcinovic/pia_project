
<div *ngIf="agency">
  <h2>Agencija {{agency.agency.name}}</h2>
  <table>

    <tr>
      <th>Profilna slika:</th>
      <td><img [src]="'http://localhost:4000/pictures/'+agency.username+'.jpg'" alt="img" width="100" height="100"></td>
    </tr>

    <tr>
      <th>Adresa:</th>
      <td>{{ agency.agency.address.street }} {{ agency.agency.address.number }}, {{ agency.agency.address.city }}, {{ agency.agency.address.country }}</td>
    </tr>
    <tr>
      <th>PIB:</th>
      <td>{{ agency.agency.PIB }}</td>
    </tr>
    <tr>
      <th>Opis:</th>
      <td>{{ agency.agency.description }}</td>
    </tr>
  </table>
  Ocene i komentari:
  <ng-container *ngFor="let job of allJobs">
    <div *ngIf="job.review">
      <div *ngIf="isLoggedIn">
        Korisnik: {{job.client.username}}
      </div>
      Ocena: {{job.review.rating}}
      Komentar: {{job.review.comment}}

    </div>


  </ng-container>




  <button *ngIf="isLoggedIn" (click)="showRequestForm=true">Zatrazi saradnju</button>



  <div *ngIf="showRequestForm && isLoggedIn">
    <h4>Unos podataka:</h4>
    <table>
      <tr>
        <td>Objekat:</td>
        <td>
          <select [(ngModel)]="selectedObjectId">
            <option *ngFor="let object of user.client.objects" [value]="object._id">{{ object.objectType }}</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>Vremenski period za zavrsetak:</td>
        <td>
          <input type="date" [(ngModel)]="deadline">
        </td>
      </tr>
    </table>

    <button (click)="requestCollaboration()">Po≈°alji zahtev</button>
    <span>{{reqMessage}}</span>
  </div>
</div>


